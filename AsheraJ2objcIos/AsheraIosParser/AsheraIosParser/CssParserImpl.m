//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ramm/git/Ashera/AsheraAndroidParser/src/com/ashera/android/parser/factory/CssParserImpl.java
//


#include "CSSOMParser.h"
#include "CSSRule.h"
#include "CSSRuleList.h"
#include "CSSStyleDeclaration.h"
#include "CSSStyleRule.h"
#include "CSSStyleSheet.h"
#include "CssParserImpl.h"
#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "InputSource.h"
#include "J2ObjC_source.h"
#include "SACParserCSS3.h"
#include "java/io/IOException.h"
#include "java/io/StringReader.h"
#include "java/lang/Exception.h"
#include "java/lang/RuntimeException.h"
#include "java/util/ArrayList.h"
#include "java/util/LinkedHashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"

#line 0 "/Users/ramm/git/Ashera/AsheraAndroidParser/src/com/ashera/android/parser/factory/CssParserImpl.java"

@interface ComAsheraAndroidParserFactoryCssParserImpl () {
 @public
  id<JavaUtilList> ruleList_;
}

@end

J2OBJC_FIELD_SETTER(ComAsheraAndroidParserFactoryCssParserImpl, ruleList_, id<JavaUtilList>)


#line 19
@implementation ComAsheraAndroidParserFactoryCssParserImpl

- (instancetype)init {
  ComAsheraAndroidParserFactoryCssParserImpl_init(self);
  return self;
}


#line 25
- (id<JavaUtilMap>)getWithNSString:(NSString *)tag
                      withNSString:(NSString *)className_ {
  IOSObjectArray *selectorText = [IOSObjectArray newArrayWithLength:0 type:NSString_class_()];
  
#line 28
  if (className_ != nil) {
    selectorText = [className_ split:@"\\s"];
  }
  
#line 32
  JavaUtilLinkedHashMap *finalattributes = new_JavaUtilLinkedHashMap_init();
  for (id<RepackagedOrgW3cDomCssCSSRuleList> __strong rules in nil_chk(ruleList_)) {
    for (jint i = 0; i < [((id<RepackagedOrgW3cDomCssCSSRuleList>) nil_chk(rules)) getLength]; i++) {
      id<RepackagedOrgW3cDomCssCSSRule> rule = [rules itemWithInt:i];
      
#line 37
      if ([RepackagedOrgW3cDomCssCSSStyleRule_class_() isInstance:rule]) {
        id<RepackagedOrgW3cDomCssCSSStyleRule> cssStyleRule = (id<RepackagedOrgW3cDomCssCSSStyleRule>) check_protocol_cast(rule, @protocol(RepackagedOrgW3cDomCssCSSStyleRule));
        
#line 40
        for (jint j = 0; j < ((IOSObjectArray *) nil_chk(selectorText))->size_; j++) {
          if ([((NSString *) nil_chk([((id<RepackagedOrgW3cDomCssCSSStyleRule>) nil_chk(cssStyleRule)) getSelectorText])) isEqual:JreStrcat("$$", @"*.", IOSObjectArray_Get(selectorText, j))]) {
            
#line 43
            jint attributes = [((id<RepackagedOrgW3cDomCssCSSStyleDeclaration>) nil_chk([cssStyleRule getStyle])) getLength];
            for (jint k = 0; k < attributes; k++) {
              NSString *key = [((id<RepackagedOrgW3cDomCssCSSStyleDeclaration>) nil_chk([cssStyleRule getStyle])) itemWithInt:k];
              NSString *value = [((id<RepackagedOrgW3cDomCssCSSStyleDeclaration>) nil_chk([cssStyleRule getStyle])) getPropertyValueWithNSString:key];
              (void) [finalattributes putWithId:key withId:value];
            }
          }
        }
        
#line 54
        if ([((NSString *) nil_chk([((id<RepackagedOrgW3cDomCssCSSStyleRule>) nil_chk(cssStyleRule)) getSelectorText])) isEqual:tag]) {
          jint styles = [((id<RepackagedOrgW3cDomCssCSSStyleDeclaration>) nil_chk([cssStyleRule getStyle])) getLength];
          
#line 57
          for (jint j = 0; j < styles; j++) {
            NSString *key = [((id<RepackagedOrgW3cDomCssCSSStyleDeclaration>) nil_chk([cssStyleRule getStyle])) itemWithInt:j];
            NSString *value = [((id<RepackagedOrgW3cDomCssCSSStyleDeclaration>) nil_chk([cssStyleRule getStyle])) getPropertyValueWithNSString:key];
            (void) [finalattributes putWithId:key withId:value];
          }
        }
      }
    }
  }
  
#line 67
  return finalattributes;
}


#line 71
- (void)addCssWithNSString:(NSString *)cssContentStr {
  @try {
    ComSteadystateCssParserCSSOMParser *parser = new_ComSteadystateCssParserCSSOMParser_initWithRepackagedOrgW3cCssSacParser_(new_ComSteadystateCssParserSACParserCSS3_init());
    id<RepackagedOrgW3cDomCssCSSStyleSheet> sheet = [parser parseStyleSheetWithRepackagedOrgW3cCssSacInputSource:new_RepackagedOrgW3cCssSacInputSource_initWithJavaIoReader_(new_JavaIoStringReader_initWithNSString_(
#line 75
    cssContentStr)) withOrgW3cDomNode:nil withNSString:nil];
    
#line 77
    id<RepackagedOrgW3cDomCssCSSRuleList> rules = [((id<RepackagedOrgW3cDomCssCSSStyleSheet>) nil_chk(sheet)) getCssRules];
    
#line 79
    [((id<JavaUtilList>) nil_chk(ruleList_)) addWithId:rules];
  }
  @catch (
#line 80
  JavaIoIOException *e) {
    @throw new_JavaLangRuntimeException_initWithJavaLangThrowable_(e);
  }
  @catch (
#line 82
  JavaLangException *e) {
    @throw new_JavaLangRuntimeException_initWithJavaLangThrowable_(e);
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "CssParserImpl", NULL, 0x1, NULL, NULL },
    { "getWithNSString:withNSString:", "get", "Ljava.util.Map;", 0x1, NULL, NULL },
    { "addCssWithNSString:", "addCss", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "ruleList_", NULL, 0x2, "Ljava.util.List;", NULL, "Ljava/util/List<Lrepackaged/org/w3c/dom/css/CSSRuleList;>;",  },
  };
  static const J2ObjcClassInfo _ComAsheraAndroidParserFactoryCssParserImpl = { 2, "CssParserImpl", "com.ashera.android.parser.factory", NULL, 0x1, 3, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComAsheraAndroidParserFactoryCssParserImpl;
}

@end


#line 21
void ComAsheraAndroidParserFactoryCssParserImpl_init(ComAsheraAndroidParserFactoryCssParserImpl *self) {
  (void) NSObject_init(self);
  self->ruleList_ = new_JavaUtilArrayList_init();
}


#line 21
ComAsheraAndroidParserFactoryCssParserImpl *new_ComAsheraAndroidParserFactoryCssParserImpl_init() {
  ComAsheraAndroidParserFactoryCssParserImpl *self = [ComAsheraAndroidParserFactoryCssParserImpl alloc];
  ComAsheraAndroidParserFactoryCssParserImpl_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComAsheraAndroidParserFactoryCssParserImpl)
