//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ramm/git/Ashera/AsheraAndroidParser/freemarker/freemarker/core/Interpret.java
//


#include "BuiltIn.h"
#include "Configuration.h"
#include "DynamicKeyName.h"
#include "Environment.h"
#include "Expression.h"
#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "Interpret.h"
#include "J2ObjC_source.h"
#include "MessageUtil.h"
#include "NumberLiteral.h"
#include "Template.h"
#include "TemplateException.h"
#include "TemplateModel.h"
#include "TemplateModelException.h"
#include "TemplateObject.h"
#include "TemplateScalarModel.h"
#include "TemplateSequenceModel.h"
#include "TemplateTransformModel.h"
#include "UnexpectedTypeException.h"
#include "_DelayedGetMessage.h"
#include "_MiscTemplateException.h"
#include "_TemplateModelException.h"
#include "java/io/IOException.h"
#include "java/io/Writer.h"
#include "java/lang/Exception.h"
#include "java/lang/Integer.h"
#include "java/util/Locale.h"
#include "java/util/Map.h"

#line 0 "/Users/ramm/git/Ashera/AsheraAndroidParser/freemarker/freemarker/core/Interpret.java"

@interface FreemarkerCoreInterpret_TemplateProcessorModel : NSObject < FreemarkerTemplateTemplateTransformModel > {
 @public
  FreemarkerCoreInterpret *this$0_;
  FreemarkerTemplateTemplate *template__;
}

- (instancetype)initWithFreemarkerCoreInterpret:(FreemarkerCoreInterpret *)outer$
                 withFreemarkerTemplateTemplate:(FreemarkerTemplateTemplate *)template_;

- (JavaIoWriter *)getWriterWithJavaIoWriter:(JavaIoWriter *)outArg
                            withJavaUtilMap:(id<JavaUtilMap>)args;

@end

J2OBJC_EMPTY_STATIC_INIT(FreemarkerCoreInterpret_TemplateProcessorModel)

J2OBJC_FIELD_SETTER(FreemarkerCoreInterpret_TemplateProcessorModel, this$0_, FreemarkerCoreInterpret *)
J2OBJC_FIELD_SETTER(FreemarkerCoreInterpret_TemplateProcessorModel, template__, FreemarkerTemplateTemplate *)

__attribute__((unused)) static void FreemarkerCoreInterpret_TemplateProcessorModel_initWithFreemarkerCoreInterpret_withFreemarkerTemplateTemplate_(FreemarkerCoreInterpret_TemplateProcessorModel *self, FreemarkerCoreInterpret *outer$, FreemarkerTemplateTemplate *template_);

__attribute__((unused)) static FreemarkerCoreInterpret_TemplateProcessorModel *new_FreemarkerCoreInterpret_TemplateProcessorModel_initWithFreemarkerCoreInterpret_withFreemarkerTemplateTemplate_(FreemarkerCoreInterpret *outer$, FreemarkerTemplateTemplate *template_) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(FreemarkerCoreInterpret_TemplateProcessorModel)

@interface FreemarkerCoreInterpret_TemplateProcessorModel_$1 : JavaIoWriter {
 @public
  JavaIoWriter *val$out_;
}

- (void)close;

- (void)flush;

- (void)writeWithCharArray:(IOSCharArray *)cbuf
                   withInt:(jint)off
                   withInt:(jint)len;

- (instancetype)initWithJavaIoWriter:(JavaIoWriter *)capture$0
                              withId:(id)arg$0;

@end

J2OBJC_EMPTY_STATIC_INIT(FreemarkerCoreInterpret_TemplateProcessorModel_$1)

J2OBJC_FIELD_SETTER(FreemarkerCoreInterpret_TemplateProcessorModel_$1, val$out_, JavaIoWriter *)

__attribute__((unused)) static void FreemarkerCoreInterpret_TemplateProcessorModel_$1_initWithJavaIoWriter_withId_(FreemarkerCoreInterpret_TemplateProcessorModel_$1 *self, JavaIoWriter *capture$0, id arg$0);

__attribute__((unused)) static FreemarkerCoreInterpret_TemplateProcessorModel_$1 *new_FreemarkerCoreInterpret_TemplateProcessorModel_$1_initWithJavaIoWriter_withId_(JavaIoWriter *capture$0, id arg$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(FreemarkerCoreInterpret_TemplateProcessorModel_$1)


#line 42
@implementation FreemarkerCoreInterpret


#line 59
- (id<FreemarkerTemplateTemplateModel>)_evalWithFreemarkerCoreEnvironment:(FreemarkerCoreEnvironment *)env {
  
#line 62
  id<FreemarkerTemplateTemplateModel> model = [((FreemarkerCoreExpression *) nil_chk(target_)) evalWithFreemarkerCoreEnvironment:env];
  FreemarkerCoreExpression *sourceExpr = nil;
  NSString *id_ = @"anonymous_interpreted";
  if ([FreemarkerTemplateTemplateSequenceModel_class_() isInstance:model]) {
    
#line 67
    sourceExpr = ((FreemarkerCoreExpression *) check_class_cast([new_FreemarkerCoreDynamicKeyName_initWithFreemarkerCoreExpression_withFreemarkerCoreExpression_(target_, new_FreemarkerCoreNumberLiteral_initWithNSNumber_(new_JavaLangInteger_initWithInt_(0))) copyLocationFromWithFreemarkerCoreTemplateObject:target_], [FreemarkerCoreExpression class]));
    if ([((id<FreemarkerTemplateTemplateSequenceModel>) nil_chk(((id<FreemarkerTemplateTemplateSequenceModel>) check_protocol_cast(model, @protocol(FreemarkerTemplateTemplateSequenceModel))))) size] > 1) {
      
#line 70
      id_ = [((FreemarkerCoreExpression *) nil_chk(((FreemarkerCoreExpression *) check_class_cast([new_FreemarkerCoreDynamicKeyName_initWithFreemarkerCoreExpression_withFreemarkerCoreExpression_(target_, new_FreemarkerCoreNumberLiteral_initWithNSNumber_(new_JavaLangInteger_initWithInt_(1))) copyLocationFromWithFreemarkerCoreTemplateObject:target_], [FreemarkerCoreExpression class])))) evalAndCoerceToStringWithFreemarkerCoreEnvironment:env];
    }
  }
  else if ([FreemarkerTemplateTemplateScalarModel_class_() isInstance:model]) {
    
#line 75
    sourceExpr = target_;
  }
  else {
    
#line 79
    @throw new_FreemarkerCoreUnexpectedTypeException_initWithFreemarkerCoreExpression_withFreemarkerTemplateTemplateModel_withNSString_withIOSClassArray_withFreemarkerCoreEnvironment_(
#line 80
    target_, model,
#line 81
    @"sequence or string", [IOSObjectArray newArrayWithObjects:(id[]){ FreemarkerTemplateTemplateSequenceModel_class_(), FreemarkerTemplateTemplateScalarModel_class_() } count:2 type:IOSClass_class_()],
#line 82
    env);
  }
  NSString *templateSource = [((FreemarkerCoreExpression *) nil_chk(sourceExpr)) evalAndCoerceToStringWithFreemarkerCoreEnvironment:env];
  FreemarkerTemplateTemplate *parentTemplate = [((FreemarkerCoreEnvironment *) nil_chk(env)) getTemplate];
  
#line 87
  FreemarkerTemplateTemplate *interpretedTemplate;
  @try {
    
#line 90
    interpretedTemplate = new_FreemarkerTemplateTemplate_initWithNSString_withNSString_withFreemarkerTemplateConfiguration_(JreStrcat("$$$",
#line 91
    ([((FreemarkerTemplateTemplate *) nil_chk(parentTemplate)) getName] != nil ? [parentTemplate getName] : @"nameless_template"), @"->", id_),
#line 92
    templateSource,
#line 93
    [parentTemplate getConfiguration]);
  }
  @catch (JavaIoIOException *e) {
    
#line 97
    @throw new_FreemarkerCore_MiscTemplateException_initWithFreemarkerCoreExpression_withJavaLangThrowable_withFreemarkerCoreEnvironment_withNSObjectArray_(self, e, env, [IOSObjectArray newArrayWithObjects:(id[]){
#line 98
      @"Template parsing with \"?", key_, @"\" has failed with this error:\n\n", FreemarkerCoreMessageUtil_get_EMBEDDED_MESSAGE_BEGIN_(), new_FreemarkerCore_DelayedGetMessage_initWithJavaLangThrowable_(
#line 100
      e), FreemarkerCoreMessageUtil_get_EMBEDDED_MESSAGE_END_(),
#line 102
      @"\n\nThe failed expression:" } count:7 type:NSObject_class_()]);
    }
    
#line 105
    [((FreemarkerTemplateTemplate *) nil_chk(interpretedTemplate)) setLocaleWithJavaUtilLocale:[env getLocale]];
    return new_FreemarkerCoreInterpret_TemplateProcessorModel_initWithFreemarkerCoreInterpret_withFreemarkerTemplateTemplate_(self, interpretedTemplate);
  }

- (instancetype)init {
  FreemarkerCoreInterpret_init(self);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "_evalWithFreemarkerCoreEnvironment:", "_eval", "Lfreemarker.template.TemplateModel;", 0x0, "Lfreemarker.template.TemplateException;", NULL },
    { "init", NULL, NULL, 0x0, NULL, NULL },
  };
  static const char *inner_classes[] = {"Lfreemarker.core.Interpret$TemplateProcessorModel;"};
  static const J2ObjcClassInfo _FreemarkerCoreInterpret = { 2, "Interpret", "freemarker.core", NULL, 0x0, 2, methods, 0, NULL, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_FreemarkerCoreInterpret;
}

@end

void FreemarkerCoreInterpret_init(FreemarkerCoreInterpret *self) {
  (void) FreemarkerCoreBuiltIn_init(self);
}

FreemarkerCoreInterpret *new_FreemarkerCoreInterpret_init() {
  FreemarkerCoreInterpret *self = [FreemarkerCoreInterpret alloc];
  FreemarkerCoreInterpret_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(FreemarkerCoreInterpret)


#line 109
@implementation FreemarkerCoreInterpret_TemplateProcessorModel


#line 115
- (instancetype)initWithFreemarkerCoreInterpret:(FreemarkerCoreInterpret *)outer$
                 withFreemarkerTemplateTemplate:(FreemarkerTemplateTemplate *)template_ {
  FreemarkerCoreInterpret_TemplateProcessorModel_initWithFreemarkerCoreInterpret_withFreemarkerTemplateTemplate_(self, outer$, template_);
  return self;
}


#line 120
- (JavaIoWriter *)getWriterWithJavaIoWriter:(JavaIoWriter *)outArg
                            withJavaUtilMap:(id<JavaUtilMap>)args {
  
#line 122
  @try {
    
#line 124
    FreemarkerCoreEnvironment *env = FreemarkerCoreEnvironment_getCurrentEnvironment();
    jboolean lastFIRE = [((FreemarkerCoreEnvironment *) nil_chk(env)) setFastInvalidReferenceExceptionsWithBoolean:NO];
    @try {
      [env includeWithFreemarkerTemplateTemplate:template__];
    }
    @finally {
      
#line 129
      [env setFastInvalidReferenceExceptionsWithBoolean:lastFIRE];
    }
  }
  @catch (JavaLangException *e) {
    
#line 134
    @throw new_FreemarkerCore_TemplateModelException_initWithJavaLangThrowable_withNSObjectArray_(e, [IOSObjectArray newArrayWithObjects:(id[]){
#line 135
      @"Template created with \"?", this$0_->key_, @"\" has stopped with this error:\n\n", FreemarkerCoreMessageUtil_get_EMBEDDED_MESSAGE_BEGIN_(), new_FreemarkerCore_DelayedGetMessage_initWithJavaLangThrowable_(
#line 137
      e), FreemarkerCoreMessageUtil_get_EMBEDDED_MESSAGE_END_() } count:6 type:NSObject_class_()]);
    }
    
#line 141
    return new_FreemarkerCoreInterpret_TemplateProcessorModel_$1_initWithJavaIoWriter_withId_(outArg, outArg);
  }

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithFreemarkerCoreInterpret:withFreemarkerTemplateTemplate:", "TemplateProcessorModel", NULL, 0x0, NULL, NULL },
    { "getWriterWithJavaIoWriter:withJavaUtilMap:", "getWriter", "Ljava.io.Writer;", 0x1, "Lfreemarker.template.TemplateModelException;Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lfreemarker.core.Interpret;", NULL, NULL,  },
    { "template__", "template", 0x12, "Lfreemarker.template.Template;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _FreemarkerCoreInterpret_TemplateProcessorModel = { 2, "TemplateProcessorModel", "freemarker.core", "Interpret", 0x2, 2, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_FreemarkerCoreInterpret_TemplateProcessorModel;
}

@end


#line 115
void FreemarkerCoreInterpret_TemplateProcessorModel_initWithFreemarkerCoreInterpret_withFreemarkerTemplateTemplate_(FreemarkerCoreInterpret_TemplateProcessorModel *self, FreemarkerCoreInterpret *outer$, FreemarkerTemplateTemplate *template_) {
  self->this$0_ = outer$;
  (void) NSObject_init(self);
  
#line 117
  self->template__ = template_;
}


#line 115
FreemarkerCoreInterpret_TemplateProcessorModel *new_FreemarkerCoreInterpret_TemplateProcessorModel_initWithFreemarkerCoreInterpret_withFreemarkerTemplateTemplate_(FreemarkerCoreInterpret *outer$, FreemarkerTemplateTemplate *template_) {
  FreemarkerCoreInterpret_TemplateProcessorModel *self = [FreemarkerCoreInterpret_TemplateProcessorModel alloc];
  FreemarkerCoreInterpret_TemplateProcessorModel_initWithFreemarkerCoreInterpret_withFreemarkerTemplateTemplate_(self, outer$, template_);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(FreemarkerCoreInterpret_TemplateProcessorModel)

@implementation FreemarkerCoreInterpret_TemplateProcessorModel_$1


#line 143
- (void)close {
}


#line 147
- (void)flush {
  
#line 149
  [((JavaIoWriter *) nil_chk(val$out_)) flush];
}


#line 152
- (void)writeWithCharArray:(IOSCharArray *)cbuf
                   withInt:(jint)off
                   withInt:(jint)len {
  
#line 154
  [((JavaIoWriter *) nil_chk(val$out_)) writeWithCharArray:cbuf withInt:off withInt:len];
}

- (instancetype)initWithJavaIoWriter:(JavaIoWriter *)capture$0
                              withId:(id)arg$0 {
  FreemarkerCoreInterpret_TemplateProcessorModel_$1_initWithJavaIoWriter_withId_(self, capture$0, arg$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "close", NULL, "V", 0x1, NULL, NULL },
    { "flush", NULL, "V", 0x1, "Ljava.io.IOException;", NULL },
    { "writeWithCharArray:withInt:withInt:", "write", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "initWithJavaIoWriter:withId:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$out_", NULL, 0x1012, "Ljava.io.Writer;", NULL, NULL,  },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "FreemarkerCoreInterpret_TemplateProcessorModel", "getWriterWithJavaIoWriter:withJavaUtilMap:" };
  static const J2ObjcClassInfo _FreemarkerCoreInterpret_TemplateProcessorModel_$1 = { 2, "", "freemarker.core", "Interpret$TemplateProcessorModel", 0x8008, 4, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_FreemarkerCoreInterpret_TemplateProcessorModel_$1;
}

@end

void FreemarkerCoreInterpret_TemplateProcessorModel_$1_initWithJavaIoWriter_withId_(FreemarkerCoreInterpret_TemplateProcessorModel_$1 *self, JavaIoWriter *capture$0, id arg$0) {
  self->val$out_ = capture$0;
  (void) JavaIoWriter_initWithId_(self, arg$0);
}

FreemarkerCoreInterpret_TemplateProcessorModel_$1 *new_FreemarkerCoreInterpret_TemplateProcessorModel_$1_initWithJavaIoWriter_withId_(JavaIoWriter *capture$0, id arg$0) {
  FreemarkerCoreInterpret_TemplateProcessorModel_$1 *self = [FreemarkerCoreInterpret_TemplateProcessorModel_$1 alloc];
  FreemarkerCoreInterpret_TemplateProcessorModel_$1_initWithJavaIoWriter_withId_(self, capture$0, arg$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(FreemarkerCoreInterpret_TemplateProcessorModel_$1)
