<!DOCTYPE html>
<html>
  <head>
    <script src="../webcomponentsjs/webcomponents-lite.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <link rel="import" href="../polymer/polymer.html">
    <title>Defining a Polymer Element from the Main Document</title>
  </head>
  <body>
    <dom-module id="linear-layout">
      <template>
		<style>
      		::content .llvertical > :nth-child(n){	
        		display: block;
        		width: intrinsic;
      		}

      		::content .llhorizontal > :nth-child(n){	
        		display: table-cell;
      		}
    	</style>   
    	<content></content>
    	</div>  	
  		
      </template>
      <script>
        HTMLImports.whenReady(function () {
          Polymer({
            is: 'linear-layout',
           		properties: {
           	      orientation: String,
           	    },
          	    attached: function() {
          	    	var current = this;
          	    	if (this.orientation == 'vertical') {
          	    		$(current).addClass('llvertical');
          	    	} else {
          	    		// simulate linear layout of android
          	    		// basically we need to add all children and hide the rest
          	    		// of the children when there is no space available
          	    		$(current).addClass('llhorizontal');
          	    		var children = $(current).children().clone();
          	    		$(current).children().remove();
          	    		
          	    		var screenwidth = $( document).width();
          	    		var runningwidth = 0;
          	    		$.each(children, function( index, child ) {
          	    			$(current).append(child);
          	    			runningwidth += $(child).width();
          	    			
          	    			if (runningwidth < screenwidth) {
          	    				$(child).css('width', $(child).width() + "px");
          	    			} else {
          	    				$(child).hide();
          	    			}
          	    		});
          	    	}
          	    }
          });
        });
      </script>
    </dom-module>
  </body>
</html>